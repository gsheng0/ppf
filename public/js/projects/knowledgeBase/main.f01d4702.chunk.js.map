{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js","Util.js","index.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","Database","suffix","type","data","undefined","onload","call","XMLHttpRequest","open","setRequestHeader","send","preview","JSON","stringify","request","e","reply","parse","response","console","log","id","updateFunction","article","onCompleteFunction","title","content","date","searchTerm","n","General","variable","document","createElement","tag","text","parent","textElement","createTextNode","appendChild","div","getElementById","firstChild","removeChild","classList","placeHolder","input","add","placeholder","textArea","rows","button","textContent","style","marginTop","homePage","getMostRecentArticles","clearPage","displayArticles","articles","contentContainer","container","containerElement","titlePreviewElement","articlePreviewText","str","out","charAt","substring","articlePreviewElement","addEventListener","titleContainer","index","indexOf","segment","tagIndex","segmentIndex","segmentTagIndex","innerSegment","innerSegmentElement","tabs","countTabs","paddingLeft","lineHeight","lineBreak","parseArticle","search","value","searchForArticle","titleElement","line","consecSpaceCounter","clearElement","createPage","articleTitleInput","inputElement","articleContentInput","textAreaElement","submitButton","buttonElement","disabled","uploadArticle","preventDefault","start","selectionStart","end","selectionEnd","cursorPos","selectionLength","indent","substr","split","pop","match","textBefore","textAfter"],"mappings":"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","file":"static/js/main.f01d4702.chunk.js","sourcesContent":["export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export class Database {\r\n    static request(suffix, type, data = undefined, onload = undefined){\r\n        const call = new XMLHttpRequest();\r\n        // call.open(type, \"http://kbase-service.gsheng.me/\" + suffix);\r\n        call.open(type, \"http://74.102.110.16:9001/\" + suffix);\r\n        // call.open(type, \"http://localhost:9001/\" + suffix);\r\n        call.setRequestHeader('Content-Type', 'application/json');\r\n        if(data !== undefined){\r\n            call.send(data);\r\n        }\r\n        else{\r\n            call.send();\r\n        }\r\n        if(onload !== undefined){\r\n            call.onload = () => {\r\n                onload(call);\r\n            };\r\n        }\r\n    }\r\n\r\n    static click(preview){\r\n        let data = JSON.stringify({preview: preview});\r\n        Database.request(\"select\", \"POST\", data, (e) => {\r\n            let reply = JSON.parse(e.response);\r\n            console.log(reply);\r\n        });\r\n    }\r\n\r\n    static getArticle(id, updateFunction){\r\n        Database.request(\"get\", \"POST\", id, (e) => {\r\n            let reply = JSON.parse(e.response);\r\n            updateFunction(reply);\r\n            console.log(reply);\r\n        });\r\n    }\r\n\r\n    static uploadArticle(article, onCompleteFunction){\r\n        let data = JSON.stringify(article);\r\n        Database.request(\"upload\", \"POST\", data, (e) => {\r\n            let reply = JSON.parse(e.response);\r\n            onCompleteFunction(reply);\r\n            console.log(reply);\r\n        })\r\n    }\r\n\r\n    static updateArticle(article){\r\n        let data = JSON.stringify({id: article.id, title: article.title, content: article.content, date: article.date});\r\n        Database.request(\"update\", \"POST\", data, (e) => {\r\n            let reply = JSON.parse(e.response);\r\n            console.log(reply);\r\n        })\r\n    }\r\n\r\n    static getAllArticles(updateFunction){ \r\n        Database.request(\"view-all\", \"GET\", {}, (e) => {\r\n            let reply = JSON.parse(e.response);\r\n            updateFunction(reply);\r\n            console.log(reply);\r\n        })\r\n    }\r\n\r\n    static searchForArticle(searchTerm, updateFunction){\r\n        Database.request(\"search\", \"POST\", searchTerm, (e) => {\r\n            let reply = JSON.parse(e.response);\r\n            updateFunction(reply);\r\n            console.log(reply);\r\n        })\r\n    }\r\n\r\n    static deleteArticle(id){\r\n        Database.request(\"delete\", \"POST\", id, (e) => {\r\n            let reply = JSON.parse(e.response);\r\n            console.log(reply);\r\n        })\r\n    }\r\n\r\n    static getMostRecentArticles(n, updateFunction){\r\n        Database.request(\"most-recent\", \"POST\", n, (e) => {\r\n            let reply = JSON.parse(e.response);\r\n            updateFunction(reply);\r\n            console.log(reply);\r\n        })\r\n    }\r\n}\r\n\r\nexport class General{\r\n    static getUpdateFunction(variable) {\r\n        return (e) => {\r\n            variable = e;\r\n        }\r\n    }\r\n\r\n    static lineBreak() { \r\n        return document.createElement(\"br\");\r\n    }\r\n\r\n    static textElement(tag, text){\r\n        let parent = document.createElement(tag);\r\n        let textElement = document.createTextNode(text);\r\n        parent.appendChild(textElement);\r\n        return parent;\r\n    }\r\n\r\n    static clearElement(id){\r\n        var div = document.getElementById(id);\r\n        while(div.firstChild){\r\n            div.removeChild(div.firstChild);\r\n        }\r\n    }\r\n\r\n    static containerElement(classList){\r\n        let container = document.createElement(\"div\");\r\n\r\n        return container;\r\n    }\r\n\r\n    static inputElement(placeHolder){\r\n        let input = document.createElement(\"input\");\r\n        input.classList.add(\"form-control\");\r\n        input.placeholder = placeHolder;\r\n        return input;\r\n    }\r\n\r\n    static textAreaElement(placeHolder){\r\n        let textArea = document.createElement(\"textarea\");\r\n        textArea.classList.add(\"form-control\");\r\n        textArea.placeholder = placeHolder;\r\n        textArea.rows = 30;\r\n        return textArea;\r\n    }\r\n\r\n    static formElement(){\r\n        let form = document.createElement(\"form\");\r\n        return form;\r\n    }\r\n\r\n    static buttonElement(text){\r\n        let button = document.createElement(\"button\");\r\n        button.classList.add(\"btn\");\r\n        button.classList.add(\"btn-outline-success\");\r\n        button.classList.add(\"my-2\");\r\n        button.classList.add(\"my-sm-0\")\r\n        button.textContent = text;\r\n        button.style.marginTop=\"40px\";\r\n        return button;\r\n    }\r\n}\r\n","import {General, Database} from \"./Util\";\r\n\r\nfunction init(){\r\n    document.getElementById(\"home\").addEventListener(\"click\", homePage)\r\n\r\n    document.getElementById(\"search\").addEventListener(\"keydown\", (e) => { if(e.key === \"Enter\") { search(); }});\r\n\r\n    document.getElementById(\"searchButton\").addEventListener(\"click\", search)\r\n\r\n    document.getElementById(\"create\").addEventListener(\"click\", createPage);\r\n\r\n    homePage();\r\n}\r\n\r\nfunction homePage(){\r\n    Database.getMostRecentArticles(5, (reply) => {\r\n        clearPage();\r\n        let titleContainer = document.getElementById(\"title\");\r\n        titleContainer.appendChild(General.textElement(\"h1\", \"George Sheng's Code Knowledge Base\"));\r\n        displayArticles(reply);\r\n    });\r\n}\r\n\r\nfunction displayArticles(articles){\r\n    let contentContainer = document.getElementById(\"content\");\r\n\r\n    for(let i = 0; i < articles.length; i++){\r\n        let container = General.containerElement([]);\r\n\r\n        let titlePreviewElement = General.textElement(\"h3\", articles[i].title);\r\n        container.appendChild(titlePreviewElement);\r\n\r\n        let articlePreviewText = preview(articles[i].content);\r\n\r\n        let articlePreviewElement = General.textElement(\"p\", articlePreviewText);\r\n        container.appendChild(articlePreviewElement);\r\n        container.classList.add(\"border\");\r\n        container.classList.add(\"article-preview\");\r\n        container.addEventListener(\"click\", (e) => {\r\n            clearPage();\r\n            parseArticle(articles[i]);\r\n        });\r\n        contentContainer.appendChild(container);   \r\n    }\r\n}\r\n\r\nfunction parseArticle(article){\r\n    var titleContainer = document.getElementById(\"title\");\r\n    var contentContainer = document.getElementById(\"content\");\r\n\r\n    titleContainer.appendChild(General.textElement(\"h1\", article.title));\r\n    contentContainer.appendChild(General.textElement(\"h5\", article.date));\r\n    \r\n    let content = article.content;\r\n\r\n    let index = 0;\r\n    while(content.indexOf(\"<code>\", index) !== -1){\r\n        let tagIndex = content.indexOf(\"<code>\", index);\r\n        var segment;\r\n        if(tagIndex !== index){\r\n            segment = content.substring(index, tagIndex);\r\n            let segmentIndex = 0;\r\n            console.log(segment);\r\n            console.log(segment.indexOf(\"\\n\", segmentIndex));\r\n            while(segment.indexOf(\"\\n\", segmentIndex) !== -1){\r\n                let segmentTagIndex = segment.indexOf(\"\\n\", segmentIndex);\r\n                let innerSegment = segment.substring(segmentIndex, segmentTagIndex);\r\n                let innerSegmentElement = General.textElement(\"p\", innerSegment);\r\n                let tabs = countTabs(innerSegment);\r\n                innerSegmentElement.style.paddingLeft = tabs * 40 + \"px\";\r\n                innerSegmentElement.style.lineHeight = \"100%\";\r\n                contentContainer.appendChild(innerSegmentElement);\r\n\r\n                segmentIndex = segmentTagIndex + 1;\r\n            }\r\n            let innerSegmentElement = General.textElement(\"p\", segment.substring(segmentIndex));\r\n            contentContainer.appendChild(innerSegmentElement);\r\n            contentContainer.appendChild(General.lineBreak());\r\n            index = tagIndex;\r\n        }\r\n        else {\r\n            segment = content.substring(tagIndex + 6, content.indexOf(\"</code>\", index));\r\n            let segmentIndex = 0;\r\n            while(segment.indexOf(\"\\n\", segmentIndex) !== -1){\r\n                let segmentTagIndex = segment.indexOf(\"\\n\", segmentIndex);\r\n                let innerSegment = segment.substring(segmentIndex, segmentTagIndex);\r\n                let innerSegmentElement = General.textElement(\"code\", innerSegment);\r\n                let tabs = countTabs(innerSegment);\r\n                innerSegmentElement.style.paddingLeft = tabs * 40 + \"px\";\r\n                innerSegmentElement.classList.add(\"code\");\r\n                contentContainer.appendChild(innerSegmentElement);\r\n                contentContainer.appendChild(General.lineBreak());\r\n                segmentIndex = segmentTagIndex + 1;\r\n            }\r\n            let innerSegmentElement = General.textElement(\"code\", segment.substring(segmentIndex));\r\n            innerSegmentElement.classList.add(\"code\");\r\n            contentContainer.appendChild(innerSegmentElement);\r\n            contentContainer.appendChild(General.lineBreak());\r\n            index = content.indexOf(\"</code>\", index) + 7;\r\n        }\r\n    }\r\n    segment = content.substring(index);\r\n    let segmentIndex = 0;\r\n    while(segment.indexOf(\"\\n\", segmentIndex) !== -1){\r\n        let segmentTagIndex = segment.indexOf(\"\\n\", segmentIndex);\r\n        let innerSegment = segment.substring(segmentIndex, segmentTagIndex);\r\n        let innerSegmentElement = General.textElement(\"p\", innerSegment);\r\n        let tabs = countTabs(innerSegment);\r\n\r\n        innerSegmentElement.style.paddingLeft = tabs * 40 + \"px\";\r\n        \r\n        innerSegmentElement.style.lineHeight = \"100%\";\r\n        contentContainer.appendChild(innerSegmentElement);\r\n        segmentIndex = segmentTagIndex + 1;\r\n    }\r\n    let innerSegmentElement = General.textElement(\"p\", segment.substring(segmentIndex));\r\n    contentContainer.appendChild(innerSegmentElement);\r\n    contentContainer.appendChild(General.lineBreak());\r\n    let tabs  = countTabs(segment.substring(segmentIndex));\r\n    innerSegmentElement.style.paddingLeft = tabs * 40 + \"px\";\r\n    innerSegmentElement.style.lineHeight = \"100%\";\r\n\r\n}\r\n\r\nfunction search(){\r\n    let searchTerm = document.getElementById(\"search\").value;\r\n    Database.searchForArticle(searchTerm, (articles) => {\r\n        clearPage();\r\n        let titleElement = General.textElement(\"h1\", \"Search results for \\\"\" + searchTerm + \"\\\":\");\r\n        document.getElementById(\"title\").appendChild(titleElement);\r\n        displayArticles(articles);\r\n    });\r\n}\r\n\r\nfunction countTabs(line){\r\n    let out = 0;\r\n    let index  = 0;\r\n    while(line.indexOf(\"\\t\", index) !== -1){\r\n        out +=1;\r\n        index = line.indexOf(\"\\t\", index) + 1;\r\n    }\r\n    let consecSpaceCounter = 0;\r\n    for(let i = 0; i < line.length; i++){\r\n        if(line.charAt(i) === \" \"){\r\n            if(consecSpaceCounter === 3){\r\n                out += 1;\r\n                consecSpaceCounter = 0;\r\n            }\r\n            else{\r\n                consecSpaceCounter += 1;\r\n            }\r\n        }\r\n        else{\r\n            break;\r\n        }\r\n    }\r\n    return out;\r\n}\r\n\r\nfunction clearPage(){\r\n    General.clearElement(\"title\");\r\n    General.clearElement(\"content\");\r\n}\r\n\r\nfunction createPage() {\r\n    clearPage();\r\n    let titleContainer = document.getElementById(\"title\");\r\n    let contentContainer = document.getElementById(\"content\");\r\n\r\n    titleContainer.appendChild(General.textElement(\"h1\", \"Write an Article\"));\r\n    let articleTitleInput = General.inputElement(\"Article Title\");\r\n    let articleContentInput = General.textAreaElement(\"Article Content\");\r\n    let submitButton = General.buttonElement(\"Submit\");\r\n\r\n    submitButton.addEventListener(\"click\", (e) => {\r\n        submitButton.disabled = true;\r\n        Database.uploadArticle({title: articleTitleInput.value, content: articleContentInput.value }, (reply) => {\r\n            submitButton.disabled = false;\r\n            articleTitleInput.value = \"\";\r\n            articleContentInput.value = \"\";\r\n        });\r\n    });\r\n\r\n    contentContainer.appendChild(articleTitleInput);\r\n    contentContainer.appendChild(General.lineBreak());\r\n    contentContainer.appendChild(articleContentInput);\r\n    contentContainer.appendChild(submitButton);\r\n\r\n    articleContentInput.addEventListener(\"keydown\", (e) => {\r\n        if (e.key === 'Tab') {\r\n            e.preventDefault();\r\n            var start = articleContentInput.selectionStart;\r\n            var end = articleContentInput.selectionEnd;\r\n        \r\n            articleContentInput.value = articleContentInput.value.substring(0, start) +\r\n              \"\\t\" + articleContentInput.value.substring(end);\r\n        \r\n            articleContentInput.selectionStart =\r\n              articleContentInput.selectionEnd = start + 1;\r\n        }\r\n\r\n        if(e.key === \"Enter\"){\r\n            var cursorPos = articleContentInput.selectionStart;\r\n            var selectionLength = articleContentInput.selectionEnd - cursorPos;\r\n            var curentLine = articleContentInput.value.substr(0, articleContentInput.selectionStart).split(\"\\n\").pop();\r\n            var indent = curentLine.match(/^\\s*/)[0];\r\n            var value = articleContentInput.value;\r\n            var textBefore = value.substring(0,  cursorPos );\r\n            var textAfter  = value.substring( cursorPos, value.length );\r\n    \r\n            e.preventDefault();\r\n            articleContentInput.value = textBefore + \"\\n\" + indent + textAfter;\r\n            articleContentInput.selectionStart = cursorPos + indent.length + 1;\r\n            articleContentInput.selectionEnd = selectionLength + cursorPos + indent.length + 1;\r\n        }\r\n        \r\n    });\r\n}\r\n\r\nfunction preview(str){\r\n    let out = \"\";\r\n    for(let i = 0; i < str.length; i++){\r\n        if(str.charAt(i) === \"\\\\\"){\r\n            i+=1;\r\n        }\r\n        else if(str.charAt(i) === \"<\"){\r\n            if(str.charAt(i + 1) === \"/\"){\r\n                i += 6;\r\n            }\r\n            else{\r\n                i += 5;\r\n            }\r\n        }\r\n        else{\r\n            out += str.charAt(i);\r\n        }\r\n    }\r\n    return out.substring(0, 300);\r\n}\r\n\r\ninit();\r\n\r\n"],"sourceRoot":""}